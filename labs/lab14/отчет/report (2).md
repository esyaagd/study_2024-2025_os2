---
## Front matter
title: "Отчёт по лабораторной работе №14"
subtitle: "Партиции, файловые системы, монтирование"
author: "Агджабекова Эся Рустамовна"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки создания разделов на диске и файловых систем. Получить навыки монтирования файловых систем

# Ход выполнения

В виртуальную машину были добавлены два дополнительных диска: disk1 и disk2. Далее произведена работа с диском **/dev/sdb** с использованием утилиты fdisk.

## Просмотр доступных дисков

В терминале с правами администратора вызван список всех устройств хранения. В выводе видно, что система обнаружила диски `/dev/sdb` и `/dev/sdc`, каждый объёмом 1.5 GiB.

![Просмотр дисков](01.png){ #fig:001 width=70% }

## Создание основного раздела на /dev/sdb

Запущена утилита fdisk для работы с диском `/dev/sdb`. Внутри утилиты была вызвана справка по командам и отображена текущая разметка диска.

После этого создан основной раздел размером 300 MiB. Разделу присвоен тип Linux (ID 83). Изменения сохранены.

![Создание основного раздела](02.png){ #fig:002 width=70% }
![Создание основного раздела — подтверждение](03.png){ #fig:003 width=85% }

## Проверка таблицы разделов

Была проверена информация о разделах двумя командами: просмотр через fdisk и вывод содержимого `/proc/partitions`. После сравнения таблица разделов ядра обновлена.

![Проверка таблицы разделов](04.png){ #fig:004 width=85% }

## Создание расширенного и логического разделов

Снова выполнен вход в fdisk для диска `/dev/sdb`. Создан расширенный раздел на оставшемся свободном пространстве диска. Затем внутри него создан логический раздел размером 300 MiB.

Изменения подтверждены и записаны.

![Создание расширенного и логического раздела](05.png){ #fig:005 width=85% }
![Проверка разметки после добавления логического раздела](06.png){ #fig:006 width=85% }

## Создание раздела подкачки (SWAP)

В оставшемся пространстве был создан ещё один логический раздел размером 300 MiB. Тип раздела изменён на **Linux swap (ID 82)**. Раздел записан в таблицу.

![Создание SWAP раздела](07.png){ #fig:007 width=85% }
![Проверка таблицы разделов после изменений](08.png){ #fig:008 width=85% }

Раздел `/dev/sdb6` был отформатирован как раздел подкачки и активирован. Вывод информации о памяти подтвердил, что пространство SWAP доступно системе.

![Активация SWAP](09.png){ #fig:009 width=85% }

## Работа с GPT-разметкой диска с помощью `gdisk`

В терминале открыт список разделов диска `/dev/sdc`. Утилита показала, что таблица разделов отсутствует, и будет создана GPT.

![Просмотр таблицы разделов gdisk](10.png){ #fig:010 width=70% }

Внутри `gdisk` создан новый раздел номер 1. Для него был принят первый доступный сектор и указан размер 300 MiB. Тип раздела оставлен по умолчанию — **Linux filesystem (код 8300)**.

![Создание GPT-раздела](11.png){ #fig:011 width=85% }

После записи изменений (`w`) созданный раздел сохранён на диск. Повторная проверка показала корректное отображение таблицы.

![Проверка созданного GPT-раздела](12.png){ #fig:012 width=85% }

## Форматирование созданных разделов

Создана файловая система XFS и присвоена метка тома `xfsdisk`.

Для раздела `/dev/sdb5` создана файловая система EXT4 и присвоена метка `ext4disk`. Затем включены параметры монтирования с расширенными атрибутами и ACL.

![Форматирование созданных разделов](13.png){ #fig:013 width=85% }

## Ручное монтирование файловых систем

Создана точка монтирования `/mnt/tmp`, раздел `/dev/sdb5` был примонтирован, проверен и затем успешно отмонтирован.

![Монтирование и размонтирование ext4](14.png){ #fig:014 width=85% }

## Автоматическое монтирование через `/etc/fstab`

Создана точка монтирования `/mnt/data`, получены UUID устройств и обновлён файл `/etc/fstab`, куда добавлена строка для автоматического монтирования `/dev/sdb1` как XFS.

![Настройка fstab](15.png){ #fig:015 width=85% }

После применения конфигурации и проверки вывод `df -h` подтвердил успешное монтирование.

![успешное монтирование](16.png){ #fig:016 width=85% }


## Добавление двух GPT-разделов на диск

В утилите `gdisk` для диска `/dev/sdc` добавлены два новых раздела, каждый объёмом 300 MiB:

- второй раздел — **EXT4 (Linux filesystem)**;
- третий раздел — **Linux swap**.

Первым нажатием `n` создан раздел №2, размер указан через `+300M`, тип оставлен по умолчанию (код 8300 — Linux filesystem).  
Вторым нажатием `n` создан раздел №3, также задан размер `+300M`, после чего тип изменён на код **8200 — Linux swap**.

![Создание двух GPT-разделов на диске](17.png){ #fig:017 width=85% }

## Форматирование новых разделов

На разделе `/dev/sdc2` создана файловая система EXT4. Затем назначена метка `ext4disk2` и включены расширенные атрибуты:

![Форматирование EXT4 и установка параметров](18.png){ #fig:018 width=85% }

Для раздела `/dev/sdc3` выполнено создание swap-пространства:

## Настройка автоматического монтирования через `/etc/fstab`

Получены UUID устройств, после чего файл `/etc/fstab` был отредактирован. Добавлены строки для автоматического монтирования EXT4 раздела и активации swap:

![Настройка /etc/fstab](19.png){ #fig:019 width=85% }

EXT4-раздел (`/dev/sdc2`) монтируется в каталог `/mnt/data-ext`, swap-раздел (`/dev/sdc3`) используется как область подкачки.

Выполнена перезагрузка системы. Команда `mount | grep mnt` подтверждает, что разделы смонтированы автоматически.  
Команда `free -m` показывает, что swap-раздел активен.

![Проверка монтирования и swap](20.png){ #fig:020 width=85% }

# Контрольные вопросы

1. **Какой инструмент используется для создания разделов GUID?**  
   Для создания разделов с таблицей GPT используется утилита **`gdisk`**.

2. **Какой инструмент применяется для создания разделов MBR?**  
   Для работы с таблицей разделов MBR применяется утилита **`fdisk`**.

3. **Какой файл используется для автоматического монтирования разделов во время загрузки?**  
   Файл **`/etc/fstab`** содержит параметры автоматического монтирования разделов при старте системы.

4. **Какой вариант монтирования выбрать, чтобы файловая система не была автоматически примонтирована во время загрузки?**  
   В файле `/etc/fstab` используется параметр **`noauto`** — он запрещает автоматическое монтирование.

5. **Какая команда позволяет форматировать раздел с типом 82 с соответствующей файловой системой?**  
   Разделы типа 82 — это swap. Команда форматирования:  
   **`mkswap /dev/имя_раздела`**

6. **Как безопасно проверить автоматическое монтирование без перезагрузки?**  
   Используется команда:  
   **`mount -a`**  
   Она пытается смонтировать всё, перечисленное в `/etc/fstab`.

7. **Какая файловая система создаётся по умолчанию, если в `mkfs` не указывать тип файловой системы?**  
   По умолчанию создаётся файловая система **EXT2**, если тип не указан.

8. **Как форматировать раздел EXT4?**  
   Форматирование выполняется командой:  
   **`mkfs.ext4 /dev/имя_раздела`**

9. **Как найти UUID для всех устройств на компьютере?**  
   UUID отображаются командой:  
   **`blkid`**

# Заключение

В ходе лабораторной работы были изучены способы разметки дисков и управления разделами в Linux. На практике были созданы разделы с типами разметки MBR и GPT с использованием утилит `fdisk` и `gdisk`. Выполнено форматирование разделов в файловые системы XFS и EXT4, а также создан и активирован раздел подкачки (swap). Освоено ручное и автоматическое монтирование файловых систем, включая настройку постоянного монтирования через файл `/etc/fstab`. В результате закреплены навыки администрирования, необходимых для подготовки и конфигурации устройств хранения данных в операционной системе Linux.

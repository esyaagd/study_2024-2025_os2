---
## Front matter
title: "Отчёт по лабораторной работе №6"
subtitle: "Управление процессами"
author: "Агджабекова Эся Рустамовна"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки управления процессами операционной системы.

# Ход выполнения работы

## Управление заданиями

1. Получены права администратора с помощью команды `su`.  
2. Запущены процессы: `sleep 3600 &`, `dd if=/dev/zero of=/dev/null &`, а также `sleep 7200` без амперсанда в конце. Последний процесс был остановлен комбинацией `Ctrl+Z`.  
3. Просмотрен список заданий командой `jobs`, из которого видно, что два первых процесса находятся в состоянии **Running**, а третий — **Stopped** (см. рис. [@fig:001]).

![Запуск и управление заданиями](image/01.png){ #fig:001 width=70% }

4. Задание 3 переведено в фоновый режим с помощью команды `bg 3`, после чего его статус изменился на **Running**.  
5. Задание 1 возвращено на передний план командой `fg 1`, а затем прервано комбинацией `Ctrl+C`. Аналогично были завершены задания 2 и 3 (см. рис. [@fig:002]).

![Работа с заданиями в фоне и переднем плане](image/02.png){ #fig:002 width=70% }

6. В отдельном терминале, под своей учётной записью, был запущен процесс `dd if=/dev/zero of=/dev/null &`, затем сессия завершена командой `exit`.  
7. В другом терминале выполнена команда `top`, которая показала активный процесс `dd` (см. рис. [@fig:003]).  
8. С помощью встроенной команды `k` в `top` процесс `dd` был завершён, после чего программа `top` закрыта.

![Мониторинг процессов в top](image/03.png){ #fig:003 width=70% }

## Управление процессами

1. Получены права администратора с помощью команды `su`.  
2. Запущены три процесса с использованием команды `dd if=/dev/zero of=/dev/null &`.  
3. Для просмотра информации о запущенных процессах применена команда  
   `ps aux | grep dd`, которая вывела список процессов, содержащих подстроку **dd**. В нём видны три запущенных процесса `dd` (см. рис. [@fig:004]).

![Просмотр процессов с помощью ps aux](image/04.png){ #fig:004 width=70% }

4. Приоритет одного из процессов изменён командой  
   `renice -n 5 <PID>`, где `<PID>` — идентификатор одного из процессов `dd`. В результате его приоритет был изменён с 0 на 5.  
5. Для отображения иерархии процессов применена команда  
   `ps fax | grep -B5 dd`. На выходе видно дерево процессов, в котором процессы `dd` являются дочерними по отношению к оболочке root (см. рис. [@fig:005]).

![Отображение иерархии процессов](image/05.png){ #fig:005 width=70% }

6. Определён PID родительской оболочки, из которой были запущены процессы `dd`. Командой  
   `kill -9 <PID>` оболочка завершена, вследствие чего завершились и все её дочерние процессы. Такой способ позволяет быстро остановить группу связанных процессов.

## Изменение приоритета процессов

1. Запущены три процесса командой  
   `dd if=/dev/zero of=/dev/null &` в фоновом режиме.  
2. Приоритет одного из процессов изменён командой  
   `renice -n -5 <PID>`, что повысило его приоритет относительно остальных (см. рис. [@fig:006]).  
3. Тот же процесс был повторно изменён с использованием команды  
   `renice -n -15 <PID>`. В отличие от предыдущего изменения, значение `-15` ещё больше повышает приоритет выполнения процесса по сравнению с другими заданиями в системе. Чем **ниже числовое значение nice**, тем выше приоритет.  
4. Все процессы `dd` были завершены командой  
   `killall dd` (см. рис. [@fig:009]).

![Изменение приоритета и завершение процессов](image/06.png){ #fig:006 width=70% }

## Работа с процессами и приоритетами (команда yes)

1. Программа `yes` была запущена в фоновом режиме с перенаправлением вывода в `/dev/null`.  
2. Та же программа была запущена на переднем плане, затем приостановлена с помощью `Ctrl+Z`, возвращена в выполнение и остановлена комбинацией `Ctrl+C` (см. рис. [@fig:007]).  
3. Аналогичные действия были выполнены для варианта запуска без перенаправления потока вывода.  
4. С помощью команды `jobs` проверено состояние заданий.  
5. Один из фоновых процессов был возвращён на передний план (`fg`) и остановлен.  
6. Другой процесс был переведён в фоновый режим (`bg`) и отмечен как **Running** (см. рис. [@fig:008]).  
7. Процесс был запущен с использованием `nohup`, что позволило ему продолжать выполнение даже после выхода из терминала.  

![Запуск и управление процессами yes](image/07.png){ #fig:007 width=70% }
![Работа с nohup и проверка состояния процессов](image/08.png){ #fig:008 width=70% }

8. В утилите `top` было подтверждено выполнение процесса `yes`, занимающего значительную долю CPU (см. рис. [@fig:009]).  

![Отслеживание процесса yes в top](image/09.png){ #fig:009 width=70% }

9. В фоновом режиме были запущены ещё три процесса `yes` с перенаправлением вывода. Два из них были завершены разными способами:  
   - по PID (`kill -9 <PID>`),  
   - по идентификатору задания (`kill -l <job_id>`).  
10. Процесс, запущенный с `nohup`, корректно обработал сигнал `SIGHUP`, продолжая работу, в отличие от обычного процесса, который был завершён (см. рис. [@fig:010]).  

![Завершение процессов yes](image/10.png){ #fig:010 width=70% }

11. Все запущенные процессы `yes` были завершены одновременно с помощью команды `killall yes`.  
12. Для сравнения приоритетов одна программа `yes` была запущена в фоне с обычным приоритетом, а вторая — с помощью команды `nice -n 5`, что задало ей более низкий приоритет. Проверка с помощью `ps -l` показала различие значений **NI** и **PRI**.  
13. Командой `renice` приоритет одного процесса был изменён, в результате чего оба процесса получили одинаковый приоритет (см. рис. [@fig:011]).  

![Изменение приоритета процессов yes](image/11.png){ #fig:011 width=70% }

# Контрольные вопросы

1. **Какая команда даёт обзор всех текущих заданий оболочки?**  
   Команда: `jobs`.

2. **Как остановить текущее задание оболочки, чтобы продолжить его выполнение в фоновом режиме?**  
   Комбинация клавиш `Ctrl+Z` останавливает выполнение, а затем командой `bg` можно продолжить работу в фоне.

3. **Какую комбинацию клавиш можно использовать для отмены текущего задания оболочки?**  
   Комбинация: `Ctrl+C`.

4. **Необходимо отменить одно из начатых заданий. Доступ к оболочке, в которой в данный момент работает пользователь, невозможен. Что можно сделать, чтобы отменить задание?**  
   Использовать команду `kill <PID>` или `killall <имя_процесса>` в другой оболочке/терминале.

5. **Какая команда используется для отображения отношений между родительскими и дочерними процессами?**  
   Команда: `ps fax`.

6. **Какая команда позволит изменить приоритет процесса с идентификатором 1234 на более высокий?**  
   Команда: `renice -n -5 -p 1234`. (чем меньше значение nice, тем выше приоритет).

7. **В системе в настоящее время запущено 20 процессов dd. Как проще всего остановить их все сразу?**  
   Команда: `killall dd`.

8. **Какая команда позволяет остановить команду с именем mycommand?**  
   Команда: `killall mycommand`.

9. **Какая команда используется в top, чтобы убить процесс?**  
   В `top` используется клавиша `k`, затем вводится PID процесса.

10. **Как запустить команду с достаточно высоким приоритетом, не рискуя, что не хватит ресурсов для других процессов?**  
    Использовать команду `nice` с положительным значением:  
    `nice -n 10 <команда>` — это снижает приоритет процесса и уменьшает нагрузку на систему.

# Заключение

В ходе лабораторной работы были изучены основные приёмы управления заданиями и процессами в Linux. Освоены способы запуска процессов в фоновом и переднем режиме, их приостановки, возобновления и завершения. Получены практические навыки использования команд `jobs`, `fg`, `bg`, `kill`, `killall`, `ps`, `top`, а также изменения приоритетов процессов с помощью `nice` и `renice`.  
Закреплены умения отслеживать взаимосвязь родительских и дочерних процессов и контролировать использование системных ресурсов.  
